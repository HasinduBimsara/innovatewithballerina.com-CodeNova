<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="images/logo.png" />
    <meta
      name="description"
      content="TaskFlow - Connect with skilled professionals to get tasks done or offer your services. The modern platform for task exchange."
    />
    <title>TaskSwap - Connect Tasks with Talent</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      :root {
        --primary: #2563eb;
        --primary-dark: #1d4ed8;
        --secondary: #f59e0b;
        --dark: #1f2937;
        --light: #f9fafb;
        --gray: #6b7280;
        --success: #10b981;
        --shadow-sm: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
        --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
          0 10px 10px -5px rgba(0, 0, 0, 0.04);
        --transition: all 0.3s ease;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Poppins", sans-serif;
        background: var(--light);
        color: var(--dark);
        line-height: 1.6;
        overflow-x: hidden;
      }

      .container {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1.5rem;
      }

      /* Navigation */
      nav {
        background: #ffffff;
        padding: 1rem 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: var(--shadow-sm);
        position: sticky;
        top: 0;
        z-index: 1000;
      }

      .nav-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        text-decoration: none;
      }

      .logo-icon {
        font-size: 1.8rem;
        color: var(--primary);
      }

      .logo-text {
        font-size: 1.6rem;
        font-weight: 700;
        color: var(--primary);
      }

      .nav-links {
        display: flex;
        align-items: center;
        gap: 2rem;
      }

      .nav-links a {
        text-decoration: none;
        font-weight: 500;
        color: var(--dark);
        transition: var(--transition);
        position: relative;
      }

      .nav-links a:not(.btn):after {
        content: "";
        position: absolute;
        width: 0;
        height: 2px;
        bottom: -4px;
        left: 0;
        background-color: var(--primary);
        transition: var(--transition);
      }

      .nav-links a:not(.btn):hover:after {
        width: 100%;
      }

      .nav-links a:hover {
        color: var(--primary);
      }

      .btn {
        display: inline-block;
        padding: 0.6rem 1.5rem;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 500;
        transition: var(--transition);
        cursor: pointer;
      }

      .btn-primary {
        background: var(--primary);
        color: white;
        box-shadow: var(--shadow-sm);
      }

      .btn-primary:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
      }

      .btn-outline {
        border: 1px solid var(--primary);
        color: var(--primary);
        background: transparent;
      }

      .btn-outline:hover {
        background: var(--primary);
        color: white;
      }

      .mobile-menu-btn {
        display: none;
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--dark);
      }

      /* Hero Section */
      .hero {
        background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),
          url("https://images.unsplash.com/photo-1521791136064-7986c2920216?ixlib=rb-4.0.3&auto=format&fit=crop&w=1950&q=80")
            no-repeat center/cover;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 8rem 2rem;
        color: white;
        position: relative;
      }

      .hero-content {
        max-width: 800px;
        margin: 0 auto;
      }

      .hero h1 {
        font-size: 3.2rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        line-height: 1.2;
      }

      .hero p {
        font-size: 1.2rem;
        margin-bottom: 2.5rem;
        color: #e6e6e6;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
      }

      .hero-buttons {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
      }

      /* Features Section */
      .section {
        padding: 5rem 2rem;
      }

      .section-title {
        text-align: center;
        margin-bottom: 3rem;
      }

      .section-title h2 {
        font-size: 2.5rem;
        color: var(--dark);
        margin-bottom: 1rem;
        position: relative;
        display: inline-block;
      }

      .section-title h2:after {
        content: "";
        position: absolute;
        width: 60px;
        height: 4px;
        background: var(--primary);
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        border-radius: 2px;
      }

      .section-title p {
        color: var(--gray);
        max-width: 600px;
        margin: 0 auto;
      }

      .features {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 3rem;
      }

      .feature-card {
        background: white;
        border-radius: 12px;
        padding: 2rem;
        box-shadow: var(--shadow-sm);
        transition: var(--transition);
        text-align: center;
      }

      .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-md);
      }

      .feature-icon {
        font-size: 2.5rem;
        color: var(--primary);
        margin-bottom: 1.5rem;
      }

      .feature-card h3 {
        font-size: 1.5rem;
        margin-bottom: 1rem;
        color: var(--dark);
      }

      .feature-card p {
        color: var(--gray);
      }

      /* How It Works */
      .how-it-works {
        background: #f3f4f6;
      }

      .steps {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 2rem;
        margin-top: 3rem;
      }

      .step {
        background: white;
        border-radius: 12px;
        padding: 2rem;
        box-shadow: var(--shadow-sm);
        flex: 1;
        min-width: 250px;
        max-width: 300px;
        text-align: center;
        position: relative;
      }

      .step-number {
        position: absolute;
        top: -20px;
        left: 50%;
        transform: translateX(-50%);
        width: 40px;
        height: 40px;
        background: var(--primary);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
      }

      .step-icon {
        font-size: 2.5rem;
        color: var(--primary);
        margin: 1.5rem 0;
      }

      .step h3 {
        margin-bottom: 1rem;
        color: var(--dark);
      }

      .step p {
        color: var(--gray);
      }

      /* Testimonials */
      .testimonials {
        background: white;
      }

      .testimonial-cards {
        display: flex;
        gap: 2rem;
        overflow-x: auto;
        padding: 1rem 0.5rem;
        scrollbar-width: thin;
      }

      .testimonial-card {
        background: var(--light);
        border-radius: 12px;
        padding: 2rem;
        box-shadow: var(--shadow-sm);
        min-width: 300px;
        max-width: 350px;
      }

      .testimonial-text {
        font-style: italic;
        margin-bottom: 1.5rem;
        color: var(--dark);
      }

      .testimonial-author {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .author-avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        object-fit: cover;
      }

      .author-details h4 {
        color: var(--dark);
        margin-bottom: 0.25rem;
      }

      .author-details p {
        color: var(--gray);
        font-size: 0.9rem;
      }

      /* CTA Section */
      .cta {
        background: linear-gradient(
          to right,
          var(--primary),
          var(--primary-dark)
        );
        color: white;
        text-align: center;
        padding: 5rem 2rem;
      }

      .cta h2 {
        font-size: 2.5rem;
        margin-bottom: 1.5rem;
      }

      .cta p {
        max-width: 600px;
        margin: 0 auto 2.5rem;
        opacity: 0.9;
      }

      .cta-buttons {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
      }

      .btn-light {
        background: white;
        color: var(--primary);
      }

      .btn-light:hover {
        background: #f0f0f0;
        transform: translateY(-2px);
      }

      /* Footer */
      footer {
        background: var(--dark);
        color: white;
        padding: 4rem 2rem 2rem;
      }

      .footer-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 3rem;
        margin-bottom: 3rem;
      }

      .footer-column h3 {
        font-size: 1.2rem;
        margin-bottom: 1.5rem;
        position: relative;
        padding-bottom: 0.5rem;
      }

      .footer-column h3:after {
        content: "";
        position: absolute;
        left: 0;
        bottom: 0;
        width: 40px;
        height: 3px;
        background: var(--primary);
      }

      .footer-column p {
        margin-bottom: 1.5rem;
        opacity: 0.8;
      }

      .footer-links {
        list-style: none;
      }

      .footer-links li {
        margin-bottom: 0.75rem;
      }

      .footer-links a {
        color: white;
        opacity: 0.8;
        text-decoration: none;
        transition: var(--transition);
      }

      .footer-links a:hover {
        opacity: 1;
        color: var(--primary);
        padding-left: 5px;
      }

      .social-links {
        display: flex;
        gap: 1rem;
        margin-top: 1.5rem;
      }

      .social-links a {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
        color: white;
        transition: var(--transition);
      }

      .social-links a:hover {
        background: var(--primary);
        transform: translateY(-3px);
      }

      .footer-bottom {
        text-align: center;
        padding-top: 2rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        opacity: 0.7;
        font-size: 0.9rem;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .nav-links {
          display: none;
          position: absolute;
          top: 100%;
          left: 0;
          width: 100%;
          background: white;
          flex-direction: column;
          padding: 1rem;
          box-shadow: var(--shadow-md);
        }

        .nav-links.active {
          display: flex;
        }

        .mobile-menu-btn {
          display: block;
        }

        .hero h1 {
          font-size: 2.5rem;
        }

        .hero p {
          font-size: 1.1rem;
        }

        .hero-buttons {
          flex-direction: column;
          align-items: center;
        }

        .section {
          padding: 3rem 1.5rem;
        }

        .section-title h2 {
          font-size: 2rem;
        }
      }

      @media (max-width: 480px) {
        .hero h1 {
          font-size: 2rem;
        }

        .hero {
          padding: 6rem 1.5rem;
        }

        .btn {
          padding: 0.75rem 1.5rem;
          width: 100%;
          text-align: center;
        }

        .cta-buttons {
          flex-direction: column;
        }
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav>
      <div class="nav-container">
        <a href="#" class="logo">
          <span class="logo-icon"><i class="fas fa-exchange-alt"></i></span>
          <span class="logo-text">TaskFlow</span>
        </a>

        <div class="nav-links">
          <a href="#">Home</a>
          <a href="#">How It Works</a>
          <a href="#">Categories</a>
          <a href="#">About Us</a>
          <a href="#">Contact</a>
          <a href="login.html" class="btn btn-outline">Login</a>
          <a href="signup.html" class="btn btn-primary">Sign Up</a>
        </div>

        <button class="mobile-menu-btn">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
      <div class="hero-content">
        <h1>Connect Tasks with Talent</h1>
        <p>
          TaskFlow helps you find the right people for your tasks or offer your
          skills to others. Join our community to get things done.
        </p>
        <div class="hero-buttons">
          <a href="#" class="btn btn-primary">Find Help</a>
          <a href="#" class="btn btn-light">Offer Help</a>
        </div>
      </div>
    </section>

    <!-- Features Section -->
    <section class="section">
      <div class="container">
        <div class="section-title">
          <h2>Why Choose TaskFlow</h2>
          <p>
            We provide a seamless experience for both task posters and task
            doers
          </p>
        </div>

        <div class="features">
          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-bolt"></i>
            </div>
            <h3>Quick Matching</h3>
            <p>
              Our algorithm quickly matches your tasks with qualified
              professionals in your area.
            </p>
          </div>

          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-shield-alt"></i>
            </div>
            <h3>Secure Payments</h3>
            <p>
              Our escrow system ensures payments are only released when you're
              satisfied with the work.
            </p>
          </div>

          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-star"></i>
            </div>
            <h3>Rating System</h3>
            <p>
              Rate your experience and help build a trusted community of taskers
              and clients.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- How It Works -->
    <section class="section how-it-works">
      <div class="container">
        <div class="section-title">
          <h2>How It Works</h2>
          <p>Getting started with TaskSwap is simple and straightforward</p>
        </div>

        <div class="steps">
          <div class="step">
            <div class="step-number">1</div>
            <div class="step-icon">
              <i class="fas fa-user-plus"></i>
            </div>
            <h3>Create Account</h3>
            <p>Sign up as a task poster or task doer in just a few minutes.</p>
          </div>

          <div class="step">
            <div class="step-number">2</div>
            <div class="step-icon">
              <i class="fas fa-tasks"></i>
            </div>
            <h3>Post or Browse</h3>
            <p>
              Post your task requirements or browse available tasks in your
              area.
            </p>
          </div>

          <div class="step">
            <div class="step-number">3</div>
            <div class="step-icon">
              <i class="fas fa-handshake"></i>
            </div>
            <h3>Connect & Complete</h3>
            <p>
              Connect with the right person and get your task completed
              efficiently.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Testimonials -->
    <section class="section testimonials">
      <div class="container">
        <div class="section-title">
          <h2>What Our Users Say</h2>
          <p>Hear from people who have used TaskSwap to get things done</p>
        </div>

        <div class="testimonial-cards">
          <div class="testimonial-card">
            <p class="testimonial-text">
              "TaskSwap helped me find a reliable handyman within hours. The
              process was smooth and the work was excellent!"
            </p>
            <div class="testimonial-author">
              <img
                src="https://randomuser.me/api/portraits/women/65.jpg"
                alt="Sarah Johnson"
                class="author-avatar"
              />
              <div class="author-details">
                <h4>Sarah Johnson</h4>
                <p>Homeowner</p>
              </div>
            </div>
          </div>

          <div class="testimonial-card">
            <p class="testimonial-text">
              "As a freelance graphic designer, TaskSwap has connected me with
              clients I wouldn't have found otherwise. Great platform!"
            </p>
            <div class="testimonial-author">
              <img
                src="https://randomuser.me/api/portraits/men/32.jpg"
                alt="Michael Chen"
                class="author-avatar"
              />
              <div class="author-details">
                <h4>Michael Chen</h4>
                <p>Freelance Designer</p>
              </div>
            </div>
          </div>

          <div class="testimonial-card">
            <p class="testimonial-text">
              "I needed help assembling furniture and found someone on TaskSwap
              who did an amazing job. Will definitely use again!"
            </p>
            <div class="testimonial-author">
              <img
                src="https://randomuser.me/api/portraits/women/44.jpg"
                alt="Emma Rodriguez"
                class="author-avatar"
              />
              <div class="author-details">
                <h4>Emma Rodriguez</h4>
                <p>Busy Professional</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="cta">
      <div class="container">
        <h2>Ready to Get Started?</h2>
        <p>
          Join thousands of users who are already benefiting from TaskSwap's
          platform
        </p>
        <div class="cta-buttons">
          <a href="#" class="btn btn-light">Sign Up Now</a>
          <a href="#" class="btn btn-outline">Learn More</a>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="footer-content">
          <div class="footer-column">
            <h3>About TaskSwap</h3>
            <p>
              TaskSwap connects people who need tasks completed with skilled
              individuals who can help. Our mission is to make task completion
              simple and efficient.
            </p>
            <div class="social-links">
              <a href="#"><i class="fab fa-facebook-f"></i></a>
              <a href="#"><i class="fab fa-twitter"></i></a>
              <a href="#"><i class="fab fa-instagram"></i></a>
              <a href="#"><i class="fab fa-linkedin-in"></i></a>
            </div>
          </div>

          <div class="footer-column">
            <h3>Quick Links</h3>
            <ul class="footer-links">
              <li><a href="#">How It Works</a></li>
              <li><a href="#">Categories</a></li>
              <li><a href="#">Pricing</a></li>
              <li><a href="#">Blog</a></li>
              <li><a href="#">Contact Us</a></li>
            </ul>
          </div>

          <div class="footer-column">
            <h3>Popular Categories</h3>
            <ul class="footer-links">
              <li><a href="#">Home Services</a></li>
              <li><a href="#">Tech Support</a></li>
              <li><a href="#">Design & Creative</a></li>
              <li><a href="#">Delivery Services</a></li>
              <li><a href="#">Event Help</a></li>
            </ul>
          </div>

          <div class="footer-column">
            <h3>Contact Info</h3>
            <ul class="footer-links">
              <li>
                <i class="fas fa-map-marker-alt"></i> 123 Task Street, City
              </li>
              <li><i class="fas fa-phone"></i> +1 (555) 123-4567</li>
              <li><i class="fas fa-envelope"></i> info@taskswap.com</li>
            </ul>
          </div>
        </div>

        <div class="footer-bottom">
          <p>&copy; 2023 TaskSwap. All rights reserved.</p>
        </div>
      </div>
    </footer>

    <script>
            <!-- Add Axios CDN before closing body tag -->
      <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js">
    </script>

    <script>
      // API Configuration
      const API_BASE_URL = "http://localhost:8080/api";

      // Mobile menu toggle function
      function toggleMobileMenu() {
        const navLinks = document.querySelector('.nav-links');
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');

        if (navLinks) {
          navLinks.classList.toggle('active');

          // Change hamburger icon to X when menu is open
          const icon = mobileMenuBtn.querySelector('i');
          if (navLinks.classList.contains('active')) {
            icon.classList.remove('fa-bars');
            icon.classList.add('fa-times');
          } else {
            icon.classList.remove('fa-times');
            icon.classList.add('fa-bars');
          }
        }
      }

      // Check authentication status
      function checkAuth() {
        const token = localStorage.getItem("taskswap_token");
        const user = localStorage.getItem("taskswap_user");

        console.log("🔍 Checking authentication status...");

        if (!token || !user) {
          console.log("🔒 User not authenticated - allowing public access");
          showAuthLinks();
          return false;
        }

        try {
          const userData = JSON.parse(user);
          console.log("👤 User authenticated:", userData.fullname, "| Role:", userData.role);

          // Validate token is not expired (basic check)
          if (isTokenExpired(token)) {
            console.log("⏰ Token expired, clearing auth data");
            clearAuthData();
            showAuthLinks();
            return false;
          }

          // Update UI for logged-in user
          updateUIForLoggedInUser(userData);
          return true;
        } catch (error) {
          console.error("❌ Error parsing user data:", error);
          clearAuthData();
          showAuthLinks();
          return false;
        }
      }

      // Basic token expiration check
      function isTokenExpired(token) {
        try {
          const payload = JSON.parse(atob(token.split('.')[1]));
          const currentTime = Date.now() / 1000;
          return payload.exp < currentTime;
        } catch (error) {
          console.warn("⚠️ Could not parse token:", error);
          return true; // Assume expired if can't parse
        }
      }

      // Clear authentication data
      function clearAuthData() {
        localStorage.removeItem("taskswap_token");
        localStorage.removeItem("taskswap_user");
      }

      // Show authentication links (Login/Sign Up)
      function showAuthLinks() {
        const navLinks = document.querySelector('.nav-links');

        // Remove any existing user info
        const existingUserInfo = navLinks.querySelector('.user-info');
        if (existingUserInfo) {
          existingUserInfo.remove();
        }

        // Ensure auth links are visible
        const loginLink = navLinks.querySelector('a[href="login.html"]');
        const signupLink = navLinks.querySelector('a[href="signup.html"]');

        if (loginLink) loginLink.style.display = 'inline-block';
        if (signupLink) signupLink.style.display = 'inline-block';
      }

      // Update UI for logged-in user
      function updateUIForLoggedInUser(user) {
        const navLinks = document.querySelector('.nav-links');

        // Hide login/signup links
        const loginLink = navLinks.querySelector('a[href="login.html"]');
        const signupLink = navLinks.querySelector('a[href="signup.html"]');

        if (loginLink) loginLink.style.display = 'none';
        if (signupLink) signupLink.style.display = 'none';

        // Remove existing user info if any
        const existingUserInfo = navLinks.querySelector('.user-info');
        if (existingUserInfo) {
          existingUserInfo.remove();
        }

        // Create and add user info section
        const userInfo = document.createElement('div');
        userInfo.className = 'user-info';
        userInfo.innerHTML = `
          <span class="user-greeting">Welcome, ${user.fullname}</span>
          <div class="user-dropdown">
            <button class="user-menu-btn">
              <i class="fas fa-user-circle"></i>
              <i class="fas fa-chevron-down"></i>
            </button>
            <div class="dropdown-content">
              <a href="dashboard.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
              <a href="profile.html"><i class="fas fa-user"></i> Profile</a>
              <a href="tasks.html"><i class="fas fa-tasks"></i> My Tasks</a>
              <hr>
              <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
            </div>
          </div>
        `;

        navLinks.appendChild(userInfo);

        // Add styles for user info (inject into head)
        if (!document.querySelector('#user-info-styles')) {
          const styles = document.createElement('style');
          styles.id = 'user-info-styles';
          styles.textContent = `
            .user-info {
              display: flex;
              align-items: center;
              gap: 1rem;
              position: relative;
            }

            .user-greeting {
              font-weight: 500;
              color: var(--dark);
            }

            .user-dropdown {
              position: relative;
            }

            .user-menu-btn {
              background: none;
              border: none;
              cursor: pointer;
              display: flex;
              align-items: center;
              gap: 0.5rem;
              padding: 0.5rem;
              border-radius: 6px;
              transition: var(--transition);
            }

            .user-menu-btn:hover {
              background: var(--light);
            }

            .dropdown-content {
              display: none;
              position: absolute;
              right: 0;
              top: 100%;
              background: white;
              min-width: 200px;
              box-shadow: var(--shadow-lg);
              border-radius: 8px;
              padding: 0.5rem 0;
              z-index: 1000;
            }

            .dropdown-content.show {
              display: block;
            }

            .dropdown-content a {
              display: flex;
              align-items: center;
              gap: 0.75rem;
              padding: 0.75rem 1rem;
              text-decoration: none;
              color: var(--dark);
              transition: var(--transition);
            }

            .dropdown-content a:hover {
              background: var(--light);
            }

            .dropdown-content hr {
              margin: 0.5rem 0;
              border: none;
              border-top: 1px solid #e5e7eb;
            }

            @media (max-width: 768px) {
              .user-info {
                flex-direction: column;
                align-items: flex-start;
                width: 100%;
                padding: 1rem 0;
                border-top: 1px solid #e5e7eb;
              }

              .dropdown-content {
                position: static;
                display: block;
                box-shadow: none;
                background: var(--light);
                margin-top: 0.5rem;
              }
            }
          `;
          document.head.appendChild(styles);
        }

        // Add dropdown functionality
        const userMenuBtn = userInfo.querySelector('.user-menu-btn');
        const dropdownContent = userInfo.querySelector('.dropdown-content');

        userMenuBtn.addEventListener('click', function(e) {
          e.stopPropagation();
          dropdownContent.classList.toggle('show');
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', function() {
          dropdownContent.classList.remove('show');
        });

        console.log(`✅ UI updated for ${user.fullname} (${user.role})`);

        // Update hero buttons based on user role
        updateHeroButtons(user.role);
      }

      // Update hero buttons based on user role
      function updateHeroButtons(userRole) {
        const heroButtons = document.querySelector('.hero-buttons');
        if (!heroButtons) return;

        // Clear existing buttons
        heroButtons.innerHTML = '';

        if (userRole === 'taskgiver') {
          heroButtons.innerHTML = `
            <a href="post-task.html" class="btn btn-primary">Post a Task</a>
            <a href="dashboard.html" class="btn btn-light">My Dashboard</a>
          `;
        } else if (userRole === 'taskseeker') {
          heroButtons.innerHTML = `
            <a href="browse-tasks.html" class="btn btn-primary">Browse Tasks</a>
            <a href="dashboard.html" class="btn btn-light">My Dashboard</a>
          `;
        } else if (userRole === 'both') {
          heroButtons.innerHTML = `
            <a href="post-task.html" class="btn btn-primary">Post a Task</a>
            <a href="browse-tasks.html" class="btn btn-light">Browse Tasks</a>
          `;
        }
      }

      // Logout function
      async function logout() {
        console.log("👋 Logging out user...");

        const token = localStorage.getItem("taskswap_token");

        // Show loading state
        const logoutBtn = document.querySelector('.dropdown-content a[onclick="logout()"]');
        if (logoutBtn) {
          logoutBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Logging out...';
        }

        // Call logout endpoint if token exists
        if (token) {
          try {
            const response = await axios.post(
              `${API_BASE_URL}/logout`,
              {},
              {
                headers: {
                  Authorization: `Bearer ${token}`,
                },
                timeout: 5000 // 5 second timeout
              }
            );
            console.log("✅ Logout successful:", response.data);
          } catch (error) {
            console.warn("⚠️ Logout request failed:", error.message);
            // Continue with local logout even if server request fails
          }
        }

        // Clear local storage
        clearAuthData();

        // Update UI
        showAuthLinks();

        // Show success message
        showNotification("Successfully logged out!", "success");

        // Reload page to reset state
        setTimeout(() => {
          window.location.reload();
        }, 1000);
      }

      // Show notification function
      function showNotification(message, type = 'info') {
        // Remove existing notifications
        const existingNotification = document.querySelector('.notification');
        if (existingNotification) {
          existingNotification.remove();
        }

        // Create notification element
        const notification = document.createElement('div');
        notification.className = `notification notification-${type}`;
        notification.innerHTML = `
          <div class="notification-content">
            <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle'}"></i>
            <span>${message}</span>
            <button class="notification-close" onclick="this.parentElement.parentElement.remove()">
              <i class="fas fa-times"></i>
            </button>
          </div>
        `;

        // Add notification styles
        if (!document.querySelector('#notification-styles')) {
          const styles = document.createElement('style');
          styles.id = 'notification-styles';
          styles.textContent = `
            .notification {
              position: fixed;
              top: 20px;
              right: 20px;
              z-index: 10000;
              max-width: 400px;
              animation: slideIn 0.3s ease;
            }

            .notification-content {
              display: flex;
              align-items: center;
              gap: 0.75rem;
              padding: 1rem 1.25rem;
              border-radius: 8px;
              box-shadow: var(--shadow-lg);
              background: white;
              border-left: 4px solid var(--primary);
            }

            .notification-success .notification-content {
              border-left-color: var(--success);
              color: var(--success);
            }

            .notification-error .notification-content {
              border-left-color: #ef4444;
              color: #ef4444;
            }

            .notification-close {
              background: none;
              border: none;
              cursor: pointer;
              opacity: 0.7;
              margin-left: auto;
            }

            .notification-close:hover {
              opacity: 1;
            }

            @keyframes slideIn {
              from {
                transform: translateX(100%);
                opacity: 0;
              }
              to {
                transform: translateX(0);
                opacity: 1;
              }
            }
          `;
          document.head.appendChild(styles);
        }

        document.body.appendChild(notification);

        // Auto remove after 5 seconds
        setTimeout(() => {
          if (notification.parentElement) {
            notification.remove();
          }
        }, 5000);
      }

      // Test API connection
      async function testAPIConnection() {
        try {
          const response = await axios.get(`${API_BASE_URL}/health`, {
            timeout: 5000
          });
          console.log("✅ API Health Check:", response.data);
          return true;
        } catch (error) {
          console.warn("⚠️ API connection failed:", error.message);
          return false;
        }
      }

      // Initialize page
      window.addEventListener("load", async function() {
        console.log("🚀 Initializing TaskFlow application...");

        // Test API connection
        const apiConnected = await testAPIConnection();
        if (!apiConnected) {
          showNotification("Unable to connect to server. Some features may not work.", "error");
        }

        // Check authentication
        checkAuth();

        console.log("✅ Application initialized");
      });

      // Close mobile menu when clicking outside
      document.addEventListener('click', function(event) {
        const navLinks = document.querySelector('.nav-links');
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');

        if (navLinks && mobileMenuBtn) {
          if (!navLinks.contains(event.target) && !mobileMenuBtn.contains(event.target)) {
            navLinks.classList.remove('active');

            // Reset hamburger icon
            const icon = mobileMenuBtn.querySelector('i');
            icon.classList.remove('fa-times');
            icon.classList.add('fa-bars');
          }
        }
      });

      // Add mobile menu button click handler
      document.addEventListener('DOMContentLoaded', function() {
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        if (mobileMenuBtn) {
          mobileMenuBtn.addEventListener('click', toggleMobileMenu);
        }
      });

      // Handle page visibility change (user switches tabs)
      document.addEventListener('visibilitychange', function() {
        if (!document.hidden) {
          // Page became visible, check if user is still authenticated
          checkAuth();
        }
      });

      // Smooth scrolling for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: '
    </script>
  </body>
</html>
